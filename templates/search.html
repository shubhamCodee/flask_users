{% extends "base.html" %}

{% block content %}

    <div class="border-b border-darkgray pb-4 mb-8 flex justify-between items-center">
        <div>
            <h1 class="text-3xl font-bold text-primary tracking-tight">AI Search</h1>
            <p class="text-secondary text-sm mt-1">Ask natural language questions about your users.</p>
        </div>
        <a href="{{ url_for('user.home') }}" class="text-softgray hover:text-primary transition-colors text-sm font-medium">
            ‚Üê Back to Dashboard
        </a>
    </div>

    <!-- Search Input Card -->
    <div class="bg-[#1E1E1E] border border-darkgray rounded-lg p-6 mb-10 shadow-lg">
        <form action="{{ url_for('user.search') }}" autocomplete="off" method="POST" class="flex flex-col md:flex-row gap-4">
            
            <input type="text" name="query" 
                value="{{ query if query else '' }}"
                placeholder="Ex: Who uses gmail? or Is there a user named Shubh?" 
                required
                class="flex-grow bg-charcoal border border-darkgray text-primary p-4 rounded focus:outline-none focus:border-softgray transition-colors placeholder-secondary/50 text-lg">
            
            <button type="submit" 
                class="bg-darkgray text-primary font-medium py-3 px-8 rounded hover:bg-softgray hover:text-charcoal transition-all duration-200 md:w-auto w-full">
                Search
            </button>
        </form>
    </div>

    <div>
        {% if query %}
            <h2 class="text-xl font-semibold mb-4 text-secondary">
                Results for: <span class="text-primary">"{{ query }}"</span>
            </h2>
        {% endif %}
        
        <div class="border border-darkgray rounded-lg overflow-hidden">
            {% if results %}
                {% for result in results %}
                    <div class="p-6 border-b border-darkgray last:border-0 hover:bg-[#1a1a1a] transition-colors">
                        <div class="flex items-start gap-4">
                            <!-- AI Icon/Indicator -->
                            <div class="mt-1 text-softgray">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                </svg>
                            </div>
                            
                            <!-- The AI Result Text -->
                            <div>
                                <p class="text-lg text-primary leading-relaxed">{{ result }}</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            
            {% elif query %}
                <div class="p-12 text-center">
                    <p class="text-secondary text-lg">No matches found in the database.</p>
                    <p class="text-darkgray text-sm mt-2">Try rephrasing your question.</p>
                </div>
            
            {% else %}
                <div class="p-12 text-center">
                    <p class="text-secondary">The AI is ready. Type a question above to start.</p>
                </div>
            {% endif %}
        </div>
    </div>

{% endblock %}